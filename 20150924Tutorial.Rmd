---
title: "20150924 Tutorial"
output: html_document
---

```{r}
#install.packages("jiebaR")
library("jiebaR")

words = "hello world"
test1 = worker()
test1 <= words
words = "今天天氣真好"
test1 = worker()
test1 <= words
words = "今天天氣真好, 我想要看電視"
test1 = worker()
test1 <= words

```

```{r}
data(iris)
#install.packages("e1071")
library(e1071)
fit = svm(Species ~., data = iris)

library("rpart")
fit = rpart(Species ~., data = iris)

plot(fit, margin= 0.1)
text(fit)

```


```{r}
a = 3
a = c(3)
c(1,2,3,4) + 2

1:4
matrix(1:4, byrow=TRUE, nrow = 2)


kevin=c(85,73)
marry =c(72,64)
jerry =c(59,66)
mat =matrix(c(kevin, marry, jerry), nrow=3, byrow=TRUE)
mat %*% c(0.4, 0.6 )


```


```{r}
gender = c(0,0,0,1,1,1,1,0,0,0,0)
plot(gender)
gender = as.factor(gender)
plot(gender)

weather=c("sunny","rainy", "cloudy", "rainy", "cloudy")
weather_category=factor(weather)
weather
weather_category


temperature =c("Low", "High", "High", "Medium", "Low", "Medium")
temperature_category=factor(temperature, order=TRUE, levels=c("Low", "Medium", "High"))
temperature_category
temperature_category[3]>temperature_category[1]
temperature_category[4]>temperature_category[3]


levels(weather_category)
levels(temperature_category)

weather=c("s","r", "c", "r", "c")
weather_factor=factor(weather)
levels(weather_factor)=c("cloudy","rainy","sunny")
weather_factor
```

```{r}
data(iris)
head(iris)
class(iris)
df=data.frame(a=c(1,2,3,4,5),b=c(2,3,4,5,6))

#觀看前幾筆資料
head(iris)
?head
head(iris, 10)
#觀看後幾筆資料
tail(iris)
tail(iris, 10)
#使用str函式檢視架構
str(iris)


#取前三列資料
iris[1:3,]
# 取前三列第一行的資料
iris[1:3,1]
#也可以用欄位名稱取值
iris[1:3,"Sepal.Length"]
#取前兩行資料
head(iris[,1:2])
#取特定欄位向量值
iris$Sepal.Length

#以Merge 做資料合併
flower.type=data.frame(Species ="setosa", Flower ="iris")
merge(flower.type, iris[1:3,], by="Species")
#用order做資料排序
iris[order(iris$Sepal.Length, decreasing =TRUE),]

a = c(1,3,2,4,6,5,9)
sort(a)
sort(a, decreasing=TRUE)
order(a)
order(a, decreasing=TRUE)

pie(table(iris$Speices))

hist(iris$Sepal.Length)

boxplot(iris$Sepal.Length ~ iris$Species)

plot(x=iris$Petal.Length, y=iris$Petal.Width, col=iris$Species)

#install.packages("rvest")
library(rvest)
finance = read_html("https://www.google.com/finance/historical?cid=674465&startdate=Sep%2025%2C%202000&enddate=Sep%2024%2C%202015&num=30&ei=GWYDVpnCEdCI0ATZzY-IAQ&start=30")
fin_table = finance %>% html_node("table.gf-table.historical_price") %>% html_table(header=TRUE)
class(fin_table)
head(fin_table)
max(fin_table$Close)
min(fin_table$Close)
boxplot(fin_table$Close)

fin_table$tf = ifelse(fin_table$Close  - fin_table$Open > 0, TRUE, FALSE)
table(fin_table$tf)

apple = read_html('http://www.appledaily.com.tw/realtimenews/section/new/')

rtddt = apple %>% html_nodes('.rtddt') 
time = sapply(rtddt, function(e) (e %>% html_node('time') %>% html_text))

h1 = sapply(rtddt, function(e) (e %>% html_node('h1') %>% html_text))
h2 = sapply(rtddt, function(e) (e %>% html_node('h2') %>% html_text))
data.frame(title=h1, category= h2, time = time)

```
